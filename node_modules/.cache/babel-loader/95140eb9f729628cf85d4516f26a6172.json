{"ast":null,"code":"var _jsxFileName = \"F:\\\\testcase3\\\\final1\\\\growerschoicemart\\\\src\\\\components\\\\CartPriceCard.js\",\n    _s = $RefreshSig$();\n\nimport { useCart } from \"../context/cart-context\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useAddress } from \"../context/address-context\";\nimport { clearCart } from \"../services/cartServices\";\nimport { useAuth } from \"../context/auth-context\";\nimport { success } from \"\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CartPriceCard = () => {\n  _s();\n\n  const {\n    cartState\n  } = useCart();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    addressState\n  } = useAddress();\n  const {\n    dispatchCart\n  } = useCart();\n  const {\n    auth\n  } = useAuth();\n\n  function totalPrice() {\n    let collectPrice = 0;\n    cartState.cartItems.map(item => collectPrice = collectPrice + item.price * item.quantity);\n    return collectPrice;\n  }\n\n  function totalOldPrice() {\n    let collectOldPrice = 0;\n    cartState.cartItems.map(item => collectOldPrice = collectOldPrice + item.price_old * item.quantity);\n    return collectOldPrice;\n  }\n\n  const deliveryCharge = () => totalPrice() > 499 ? 0 : 100;\n\n  const loadScript = () => {\n    return new Promise(resolve => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\n\n      script.onload = () => {\n        resolve(true);\n      };\n\n      script.onerror = () => {\n        resolve(false);\n      };\n\n      document.body.appendChild(script);\n    });\n  };\n\n  const handlePayment = async () => {\n    if (addressState.addressList.length > 0 && addressState.addressSelectedId) {\n      const res = await loadScript();\n\n      if (!res) {\n        toast.error(\"Razorpay SDK failed to load\");\n      }\n\n      const options = {\n        key: 'C0UALRXqRdEJDfrCrU2Rbgek',\n        amount: (totalPrice() + deliveryCharge()) * 100,\n        currency: \"INR\",\n        name: \"Grower's Choice Mart\",\n        description: \"Test Transaction\",\n        image: \"\",\n        handler: async response => {\n          clearCart({\n            auth,\n            dispatchCart\n          });\n          toast.success(\"The payment was successfull\");\n          navigate(`/order-success/${response.razorpay_payment_id}`);\n        },\n        prefill: {\n          name: \"Satya Likhith\",\n          email: \"test@gmail.com\",\n          contact: \"9951283914\"\n        },\n        notes: {\n          address: \"Grower's Choicemart\"\n        },\n        theme: {\n          color: \"#00d68b\"\n        }\n      };\n      const razorpayGateway = new window.Razorpay(options);\n      razorpayGateway.open();\n    } else {\n      addressState.addressList.length == 0 ? toast.error(\"Please Add address\") : toast.error(\"Please Select Delivery Address\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"fw-bold mg-xsm\",\n        children: \"Price Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"original-price price-item align-center mg-xsm fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Price (\", cartState.cartItems.length, \" Items)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"\\u20B9\", totalOldPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"discount-price price-item align-center mg-xsm fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Discount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"- \\u20B9\", totalOldPrice() - totalPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delivery-charges price-item align-center mg-xsm fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Delivery Charge\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"\\u20B9\", deliveryCharge()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"total-amount price-item flex align-center mg-xsm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Total Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"\\u20B9\", totalPrice() + deliveryCharge()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"note fw-bold mg-xsm\",\n        children: [\"You will save \\u20B9\", totalOldPrice() - totalPrice(), \" on this order\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"note-free-delivery fw-bold mg-xsm\",\n        children: \"FREE Home Delivery on orders above \\u20B9500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), location.pathname == \"/cart\" ? /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/checkout\",\n        className: \"btn btn-solid fw-bold btn-place-order align-center\",\n        children: \"PROCEED TO CHECKOUT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn btn-solid fw-bold btn-place-order align-center btn-payment\",\n        onClick: handlePayment,\n        children: \"PROCEED TO PAYMENT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CartPriceCard, \"44V/kMXj+2AXc3Nkz47C6SILSN0=\", false, function () {\n  return [useCart, useLocation, useNavigate, useAddress, useCart, useAuth];\n});\n\n_c = CartPriceCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartPriceCard\");","map":{"version":3,"sources":["F:/testcase3/final1/growerschoicemart/src/components/CartPriceCard.js"],"names":["useCart","Link","useLocation","useNavigate","toast","useAddress","clearCart","useAuth","success","CartPriceCard","cartState","location","navigate","addressState","dispatchCart","auth","totalPrice","collectPrice","cartItems","map","item","price","quantity","totalOldPrice","collectOldPrice","price_old","deliveryCharge","loadScript","Promise","resolve","script","document","createElement","src","onload","onerror","body","appendChild","handlePayment","addressList","length","addressSelectedId","res","error","options","key","amount","currency","name","description","image","handler","response","razorpay_payment_id","prefill","email","contact","notes","address","theme","color","razorpayGateway","window","Razorpay","open","pathname"],"mappings":"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","sourcesContent":["import { useCart } from \"../context/cart-context\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useAddress } from \"../context/address-context\";\nimport { clearCart } from \"../services/cartServices\";\nimport { useAuth } from \"../context/auth-context\";\nimport {success} from \"\"\n\nexport const CartPriceCard = () => {\n  const { cartState } = useCart();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { addressState } = useAddress();\n  const { dispatchCart } = useCart();\n  const { auth } = useAuth();\n\n  function totalPrice() {\n    let collectPrice = 0;\n    cartState.cartItems.map(\n      (item) => (collectPrice = collectPrice + item.price * item.quantity)\n    );\n    return collectPrice;\n  }\n  function totalOldPrice() {\n    let collectOldPrice = 0;\n    cartState.cartItems.map(\n      (item) =>\n        (collectOldPrice = collectOldPrice + item.price_old * item.quantity)\n    );\n    return collectOldPrice;\n  }\n\n  const deliveryCharge = () => (totalPrice() > 499 ? 0 : 100);\n\n  const loadScript = () => {\n    return new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\n      script.onload = () => {\n        resolve(true);\n      };\n      script.onerror = () => {\n        resolve(false);\n      };\n      document.body.appendChild(script);\n    });\n  };\n\n  const handlePayment = async () => {\n    if (addressState.addressList.length > 0 && addressState.addressSelectedId) {\n      const res = await loadScript();\n      if (!res) {\n        toast.error(\"Razorpay SDK failed to load\");\n      }\n      \n      const options = {\n        key: 'C0UALRXqRdEJDfrCrU2Rbgek',\n        amount: (totalPrice() + deliveryCharge()) * 100,\n        currency: \"INR\",\n        name: \"Grower's Choice Mart\",\n        description: \"Test Transaction\",\n        image: \"\",\n        handler: async (response) => {\n          clearCart({ auth, dispatchCart });\n          toast.success(\"The payment was successfull\");\n          navigate(`/order-success/${response.razorpay_payment_id}`);\n        },\n        prefill: {\n          name: \"Satya Likhith\",\n          email: \"test@gmail.com\",\n          contact: \"9951283914\",\n        },\n        notes: {\n          address: \"Grower's Choicemart\",\n        },\n        theme: {\n          color: \"#00d68b\",\n        },\n      };\n\n      const razorpayGateway = new window.Razorpay(options);\n      razorpayGateway.open();\n    } else {\n      addressState.addressList.length == 0\n        ? toast.error(\"Please Add address\")\n        : toast.error(\"Please Select Delivery Address\");\n    }\n  };\n\n  return (\n    <>\n      <div className=\"price-summary\">\n        <h3 className=\"fw-bold mg-xsm\">Price Details</h3>\n        <hr />\n        <div className=\"original-price price-item align-center mg-xsm fw-bold\">\n          <h4>Price ({cartState.cartItems.length} Items)</h4>\n          <p className=\"para-md\">₹{totalOldPrice()}</p>\n        </div>\n        <div className=\"discount-price price-item align-center mg-xsm fw-bold\">\n          <h4>Discount</h4>\n          <p className=\"para-md\">- ₹{totalOldPrice() - totalPrice()}</p>\n        </div>\n        <div className=\"delivery-charges price-item align-center mg-xsm fw-bold\">\n          <h4>Delivery Charge</h4>\n          <p className=\"para-md\">₹{deliveryCharge()}</p>\n        </div>\n        <hr />\n        <div className=\"total-amount price-item flex align-center mg-xsm\">\n          <h4>Total Amount</h4>\n          <p className=\"para-md\">₹{totalPrice() + deliveryCharge()}</p>\n        </div>\n        <hr />\n\n        <p className=\"note fw-bold mg-xsm\">\n          You will save ₹{totalOldPrice() - totalPrice()} on this order\n        </p>\n        <p className=\"note-free-delivery fw-bold mg-xsm\">\n          FREE Home Delivery on orders above ₹500\n        </p>\n\n        {location.pathname == \"/cart\" ? (\n          <Link\n            to=\"/checkout\"\n            className=\"btn btn-solid fw-bold btn-place-order align-center\"\n          >\n            PROCEED TO CHECKOUT\n          </Link>\n        ) : (\n          <a\n            className=\"btn btn-solid fw-bold btn-place-order align-center btn-payment\"\n            onClick={handlePayment}\n          >\n            PROCEED TO PAYMENT\n          </a>\n        )}\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}