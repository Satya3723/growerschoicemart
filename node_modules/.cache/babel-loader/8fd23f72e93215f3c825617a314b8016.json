{"ast":null,"code":"var _jsxFileName = \"F:\\\\testcase3\\\\final1\\\\growerschoicemart\\\\src\\\\pages\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport { Navbar, Footer } from \"../components/allComponents\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport \"../styles/pages/login.css\";\nimport { useAuth } from \"../context/auth-context\";\nimport { useState, useRef } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useCart } from \"../context/cart-context\";\nimport { useWishList } from \"../context/wishlist-context\"; //import { users } from \"../backend/db/users\"; // Import your user data\n\nimport firebase from \"firebase/compat/app\"; // Note the use of 'compat' for compatibility with older versions\n\nimport \"firebase/compat/database\"; // You can also import other Firebase services as needed\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDN5aoiJvcK7K-Pit5aesHJwiQGKnVdv60\",\n  authDomain: \"minor-5f7c5.firebaseapp.com\",\n  databaseURL: \"https://minor-5f7c5-default-rtdb.firebaseio.com\",\n  projectId: \"minor-5f7c5\",\n  storageBucket: \"minor-5f7c5.appspot.com\",\n  messagingSenderId: \"6993427988\",\n  appId: \"1:6993427988:web:7701bf4be3e7c9b585f101\",\n  measurementId: \"G-K2EFB4HXYE\"\n};\nfirebase.initializeApp(firebaseConfig);\nexport const Login = () => {\n  _s();\n\n  var _location$state, _location$state$from;\n\n  const {\n    auth,\n    setAuth\n  } = useAuth();\n  const {\n    dispatchCart\n  } = useCart();\n  const {\n    dispatchWishList\n  } = useWishList();\n  const [passwordType, setPasswordType] = useState(\"password\");\n  const [testData, setTestData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const editLoginForm = useRef(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/\";\n\n  const loginUser = async (email, password) => {\n    try {\n      const response = await firebase.auth().signInWithEmailAndPassword(email, password); // If login is successful, continue with the rest of the logic\n\n      const userRef = firebase.database().ref(\"users\").child(response.user.uid);\n      const snapshot = await userRef.once(\"value\");\n      const user = snapshot.val();\n      handleSuccessfulLogin(user);\n    } catch (error) {\n      // Handle login error\n      console.error(\"Login Error\", error);\n      handleFailedLogin();\n    }\n  };\n\n  const handleLoginForm = e => {\n    e.preventDefault();\n    const form = editLoginForm.current;\n    const enteredEmail = form[\"emailId\"].value;\n    const enteredPassword = form[\"passwordField\"].value; // Call the async function\n\n    loginUser(enteredEmail, enteredPassword);\n  };\n\n  const handleSuccessfulLogin = user => {\n    // Simulate setting authentication data and updating context\n    localStorage.setItem(\"userData\", JSON.stringify(user));\n    localStorage.setItem(\"token\", \"your_dummy_token\"); // You can generate a token here\n\n    setAuth({ ...auth,\n      token: \"your_dummy_token\",\n      isLoggedIn: true\n    });\n    dispatchCart({\n      type: \"UPDATE-CART\",\n      payload: user.cart || []\n    });\n    dispatchWishList({\n      type: \"UPDATE-WISHLIST\",\n      payload: user.wishlist || []\n    });\n    setTestData({\n      email: \"\",\n      password: \"\"\n    });\n    toast.success(\"Login Success\");\n    navigate(from, {\n      replace: true\n    });\n  };\n\n  const handleFailedLogin = () => {\n    console.log(\"Login Error\");\n    toast.error(\"Login Failed\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: editLoginForm,\n      onSubmit: handleLoginForm,\n      className: \"login-container  flex-column-center pd-y-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center mg-xsm\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"email-id-item mg-xsm flex-column fw-bold\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email-id\",\n            className: \"mg-bottom-xsm\",\n            children: [\"Email address \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"red\"\n              },\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            pattern: \"^([a-zA-Z0-9_\\\\-\\\\.]+)@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.)|(([a-zA-Z0-9\\\\-]+\\\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\\\]?)$\",\n            id: \"email-id\",\n            name: \"emailId\",\n            className: \"mg-bottom-xsm\",\n            defaultValue: testData.email,\n            placeholder: \"xyz@gmail.com\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password-item mg-xsm flex-column fw-bold\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"mg-bottom-xsm\",\n            children: [\"Password \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"red\"\n              },\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 24\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: passwordType,\n            id: \"password\",\n            name: \"passwordField\",\n            defaultValue: testData.password,\n            className: \"mg-bottom-xsm\",\n            minLength: \"8\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"material-icons login-pwd-show-icon\",\n            onClick: () => setPasswordType(passwordType => passwordType === \"password\" ? \"text\" : \"password\"),\n            children: passwordType === \"password\" ? \"visibility_off\" : \"visibility\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgotpassword\",\n            className: \"forgot-password\",\n            children: \"Forgot Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"remember-item mg-xsm fw-bold align-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            className: \"mg-xsm\",\n            id: \"remember\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"terms\",\n            children: \"Remember Me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          href: \"\",\n          className: \"btn btn-solid fw-bold\",\n          children: \"LOGIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-outline btn fw-bold  \",\n          onClick: () => setTestData({\n            email: \"test@gmail.com\",\n            password: \"test@123\"\n          }),\n          children: \"Login with Test Credentials\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          className: \"btn btn-outline-icon fw-bold\",\n          children: [\"Create New Account\", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"material-icons\",\n            children: \"chevron_right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"6nvupZjVAv2yn0I7P37Jelb59AU=\", false, function () {\n  return [useAuth, useCart, useWishList, useNavigate, useLocation];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["F:/testcase3/final1/growerschoicemart/src/pages/Login.js"],"names":["Navbar","Footer","Link","useNavigate","useLocation","useAuth","useState","useRef","toast","useCart","useWishList","firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","Login","auth","setAuth","dispatchCart","dispatchWishList","passwordType","setPasswordType","testData","setTestData","email","password","editLoginForm","navigate","location","from","state","pathname","loginUser","response","signInWithEmailAndPassword","userRef","database","ref","child","user","uid","snapshot","once","val","handleSuccessfulLogin","error","console","handleFailedLogin","handleLoginForm","e","preventDefault","form","current","enteredEmail","value","enteredPassword","localStorage","setItem","JSON","stringify","token","isLoggedIn","type","payload","cart","wishlist","success","replace","log","color"],"mappings":"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","sourcesContent":["import { Navbar, Footer } from \"../components/allComponents\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport \"../styles/pages/login.css\";\nimport { useAuth } from \"../context/auth-context\";\nimport { useState, useRef } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useCart } from \"../context/cart-context\";\nimport { useWishList } from \"../context/wishlist-context\";\n//import { users } from \"../backend/db/users\"; // Import your user data\nimport firebase from \"firebase/compat/app\"; // Note the use of 'compat' for compatibility with older versions\nimport \"firebase/compat/database\"; // You can also import other Firebase services as needed\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDN5aoiJvcK7K-Pit5aesHJwiQGKnVdv60\",\n  authDomain: \"minor-5f7c5.firebaseapp.com\",\n  databaseURL: \"https://minor-5f7c5-default-rtdb.firebaseio.com\",\n  projectId: \"minor-5f7c5\",\n  storageBucket: \"minor-5f7c5.appspot.com\",\n  messagingSenderId: \"6993427988\",\n  appId: \"1:6993427988:web:7701bf4be3e7c9b585f101\",\n  measurementId: \"G-K2EFB4HXYE\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const Login = () => {\n  const { auth, setAuth } = useAuth();\n  const { dispatchCart } = useCart();\n  const { dispatchWishList } = useWishList();\n  const [passwordType, setPasswordType] = useState(\"password\");\n  const [testData, setTestData] = useState({ email: \"\", password: \"\" });\n  const editLoginForm = useRef(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = location.state?.from?.pathname || \"/\";\n  const loginUser = async (email, password) => {\n    try {\n      const response = await firebase.auth().signInWithEmailAndPassword(email, password);\n\n      // If login is successful, continue with the rest of the logic\n      const userRef = firebase.database().ref(\"users\").child(response.user.uid);\n      const snapshot = await userRef.once(\"value\");\n      const user = snapshot.val();\n\n      handleSuccessfulLogin(user);\n    } catch (error) {\n      // Handle login error\n      console.error(\"Login Error\", error);\n      handleFailedLogin();\n    }\n  };\n\n  const handleLoginForm = (e) => {\n    e.preventDefault();\n    const form = editLoginForm.current;\n    const enteredEmail = form[\"emailId\"].value;\n    const enteredPassword = form[\"passwordField\"].value;\n\n    // Call the async function\n    loginUser(enteredEmail, enteredPassword);\n  };\n  const handleSuccessfulLogin = (user) => {\n    // Simulate setting authentication data and updating context\n    localStorage.setItem(\"userData\", JSON.stringify(user));\n    localStorage.setItem(\"token\", \"your_dummy_token\"); // You can generate a token here\n    setAuth({\n      ...auth,\n      token: \"your_dummy_token\",\n      isLoggedIn: true,\n    });\n\n    dispatchCart({ type: \"UPDATE-CART\", payload: user.cart || [] });\n    dispatchWishList({ type: \"UPDATE-WISHLIST\", payload: user.wishlist || [] });\n\n    setTestData({ email: \"\", password: \"\" });\n    toast.success(\"Login Success\");\n\n    navigate(from, { replace: true });\n  };\n\n  const handleFailedLogin = () => {\n    console.log(\"Login Error\");\n    toast.error(\"Login Failed\");\n  };\n\n  return (\n    <>\n      <Navbar />\n      {/* Main Container */}\n      <form\n        ref={editLoginForm}\n        onSubmit={handleLoginForm}\n        className=\"login-container  flex-column-center pd-y-md\"\n      >\n        <div className=\"login-card\">\n          {/* Heading */}\n          <h2 className=\"text-center mg-xsm\">Login</h2>\n          {/* Email-id */}\n          <div className=\"email-id-item mg-xsm flex-column fw-bold\">\n            <label htmlFor=\"email-id\" className=\"mg-bottom-xsm\">\n              Email address <span style={{ color: \"red\" }}>*</span>\n            </label>\n            <input\n              type=\"email\"\n              pattern=\"^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$\"\n              id=\"email-id\"\n              name=\"emailId\"\n              className=\"mg-bottom-xsm\"\n              defaultValue={testData.email}\n              placeholder=\"xyz@gmail.com\"\n              required\n            />\n          </div>\n          {/* Password */}\n          <div className=\"password-item mg-xsm flex-column fw-bold\">\n            <label htmlFor=\"password\" className=\"mg-bottom-xsm\">\n              Password <span style={{ color: \"red\" }}>*</span>\n            </label>\n            <input\n              type={passwordType}\n              id=\"password\"\n              name=\"passwordField\"\n              defaultValue={testData.password}\n              className=\"mg-bottom-xsm\"\n              minLength=\"8\"\n              required\n            />\n            <i\n              className=\"material-icons login-pwd-show-icon\"\n              onClick={() =>\n                setPasswordType((passwordType) =>\n                  passwordType === \"password\" ? \"text\" : \"password\"\n                )\n              }\n            >\n              {passwordType === \"password\" ? \"visibility_off\" : \"visibility\"}\n            </i>\n            <Link to=\"/forgotpassword\" className=\"forgot-password\">\n              Forgot Password?\n            </Link>\n          </div>\n          {/*  Remember Me  */}\n          <div className=\"remember-item mg-xsm fw-bold align-center\">\n            <input type=\"checkbox\" className=\"mg-xsm\" id=\"remember\" />\n            <label htmlFor=\"terms\">Remember Me</label>\n          </div>\n          {/* Buttons */}\n          <button href=\"\" className=\"btn btn-solid fw-bold\">\n            LOGIN\n          </button>\n          <button\n            type=\"submit\"\n            className=\"btn-outline btn fw-bold  \"\n            onClick={() =>\n              setTestData({\n                email: \"test@gmail.com\",\n                password: \"test@123\",\n              })\n            }\n          >\n            Login with Test Credentials\n          </button>\n          <Link to=\"/signup\" className=\"btn btn-outline-icon fw-bold\">\n            Create New Account<i className=\"material-icons\">chevron_right</i>\n          </Link>\n        </div>\n      </form>\n      <Footer />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}