{"ast":null,"code":"var _jsxFileName = \"F:\\\\testcase3\\\\final1\\\\growerschoicemart\\\\src\\\\components\\\\CartPriceCard.js\",\n    _s = $RefreshSig$();\n\nimport { useCart } from \"../context/cart-context\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useAddress } from \"../context/address-context\"; //import { clearCart } from \"../services/cartServices\";\n//import { useAuth } from \"../context/auth-context\";\n//import { useState } from \"react\"; // Import useState from React\n\nimport { database } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CartPriceCard = () => {\n  _s();\n\n  const {\n    cartState\n  } = useCart();\n  const location = useLocation();\n  const {\n    addressState\n  } = useAddress();\n  const navigate = useNavigate(); // Add this line\n  // const [showOrderSuccess, setShowOrderSuccess] = useState(false);\n\n  function totalPrice() {\n    let collectPrice = 0;\n    cartState.cartItems.map(item => collectPrice = collectPrice + item.price * item.quantity);\n    return collectPrice;\n  }\n\n  function totalOldPrice() {\n    let collectOldPrice = 0;\n    cartState.cartItems.map(item => collectOldPrice = collectOldPrice + item.price_old * item.quantity);\n    return collectOldPrice;\n  }\n\n  const deliveryCharge = () => totalPrice() > 10 ? 0 : 100;\n\n  const handlePayment = async () => {\n    if (addressState.addressList.length > 0 && addressState.addressSelectedId) {\n      // Store order details in Firebase Realtime Database\n      const selectedAddress = addressState.addressList.find(address => address.id === addressState.addressSelectedId);\n      const orderDetails = {\n        cartItems: cartState.cartItems,\n        totalPrice: totalPrice(),\n        deliveryCharge: deliveryCharge(),\n        totalAmount: totalPrice() + deliveryCharge(),\n        orderPlacedAt: new Date().toISOString(),\n        address: addressState.addressSelectedId\n      }; // Push the order to the 'orders' node in the database\n\n      const newOrderRef = database.ref(\"orders\").push();\n      const orderId = newOrderRef.key; // Retrieve the unique key generated by push as the Order ID\n\n      await newOrderRef.set({ ...orderDetails,\n        orderId\n      }); // set the order details along with orderId\n      // Clear the cart\n      // Call the clearCart function if available\n      // clearCart();\n\n      toast.success(\"Order Placed Successfully\");\n      navigate(\"/order-success\");\n    } else {\n      addressState.addressList.length === 0 ? toast.error(\"Please Add address\") : toast.error(\"Please Select Delivery Address\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"fw-bold mg-xsm\",\n        children: \"Price Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"original-price price-item align-center mg-xsm fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Price (\", cartState.cartItems.length, \" Items)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"\\u20B9\", totalOldPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"discount-price price-item align-center mg-xsm fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Discount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"- \\u20B9\", totalOldPrice() - totalPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delivery-charges price-item align-center mg-xsm fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Delivery Charge\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"\\u20B9\", deliveryCharge()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"total-amount price-item flex align-center mg-xsm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Total Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"para-md\",\n          children: [\"\\u20B9\", totalPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"note fw-bold mg-xsm\",\n        children: [\"You will save \\u20B9\", totalOldPrice() - totalPrice(), \" on this order\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"note-free-delivery fw-bold mg-xsm\",\n        children: \"FREE Home Delivery on all orders within same village.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"note-free-delivery fw-bold mg-xsm\",\n        children: \"\\u0C12\\u0C15\\u0C47 \\u0C17\\u0C4D\\u0C30\\u0C3E\\u0C2E\\u0C02\\u0C32\\u0C4B\\u0C28\\u0C3F \\u0C05\\u0C28\\u0C4D\\u0C28\\u0C3F \\u0C06\\u0C30\\u0C4D\\u0C21\\u0C30\\u0C4D\\u200C\\u0C32\\u0C2A\\u0C48 \\u0C09\\u0C1A\\u0C3F\\u0C24 \\u0C39\\u0C4B\\u0C2E\\u0C4D \\u0C21\\u0C46\\u0C32\\u0C3F\\u0C35\\u0C30\\u0C40.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), location.pathname == \"/cart\" ? /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/checkout\",\n        className: \"btn btn-solid fw-bold btn-place-order align-center\",\n        children: \"PROCEED TO CHECKOUT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn btn-solid fw-bold btn-place-order align-center btn-payment\",\n        onClick: handlePayment,\n        children: \"CONFIRM ORDER\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CartPriceCard, \"TT2J61oQJZMEsGKxwdUWUxypbes=\", false, function () {\n  return [useCart, useLocation, useAddress, useNavigate];\n});\n\n_c = CartPriceCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartPriceCard\");","map":{"version":3,"sources":["F:/testcase3/final1/growerschoicemart/src/components/CartPriceCard.js"],"names":["useCart","Link","useLocation","useNavigate","toast","useAddress","database","CartPriceCard","cartState","location","addressState","navigate","totalPrice","collectPrice","cartItems","map","item","price","quantity","totalOldPrice","collectOldPrice","price_old","deliveryCharge","handlePayment","addressList","length","addressSelectedId","selectedAddress","find","address","id","orderDetails","totalAmount","orderPlacedAt","Date","toISOString","newOrderRef","ref","push","orderId","key","set","success","error","pathname"],"mappings":"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","sourcesContent":["import { useCart } from \"../context/cart-context\";\nimport { Link,  useLocation, useNavigate} from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useAddress } from \"../context/address-context\";\n//import { clearCart } from \"../services/cartServices\";\n//import { useAuth } from \"../context/auth-context\";\n//import { useState } from \"react\"; // Import useState from React\nimport { database } from \"../firebase\";\n\nexport const CartPriceCard = () => {\n  const { cartState } = useCart();\n  const location = useLocation();\n  const { addressState } = useAddress();\n  const navigate = useNavigate(); // Add this line\n // const [showOrderSuccess, setShowOrderSuccess] = useState(false);\n\n  function totalPrice() {\n    let collectPrice = 0;\n    cartState.cartItems.map(\n      (item) => (collectPrice = collectPrice + item.price * item.quantity)\n    );\n    return collectPrice;\n  }\n  function totalOldPrice() {\n    let collectOldPrice = 0;\n    cartState.cartItems.map(\n      (item) =>\n        (collectOldPrice = collectOldPrice + item.price_old * item.quantity)\n    );\n    return collectOldPrice;\n  }\n\n  const deliveryCharge = () => (totalPrice() > 10 ? 0 : 100);\n\n\n  const handlePayment = async () => {\n    if (addressState.addressList.length > 0 && addressState.addressSelectedId) {\n      // Store order details in Firebase Realtime Database\n      const selectedAddress = addressState.addressList.find(\n        (address) => address.id === addressState.addressSelectedId\n      );\n  \n      const orderDetails = {\n        cartItems: cartState.cartItems,\n        totalPrice: totalPrice(),\n        deliveryCharge: deliveryCharge(),\n        totalAmount: totalPrice() + deliveryCharge(),\n        orderPlacedAt: new Date().toISOString(),\n        address: addressState.addressSelectedId,\n      };\n  \n      // Push the order to the 'orders' node in the database\n      const newOrderRef = database.ref(\"orders\").push();\n      const orderId = newOrderRef.key; // Retrieve the unique key generated by push as the Order ID\n      await newOrderRef.set({ ...orderDetails, orderId }); // set the order details along with orderId\n  \n      // Clear the cart\n      // Call the clearCart function if available\n      // clearCart();\n  \n      toast.success(\"Order Placed Successfully\");\n      navigate(\"/order-success\");\n    } else {\n      addressState.addressList.length === 0\n        ? toast.error(\"Please Add address\")\n        : toast.error(\"Please Select Delivery Address\");\n    }\n  };\n\n  return (\n    <>\n      <div className=\"price-summary\">\n        <h3 className=\"fw-bold mg-xsm\">Price Details</h3>\n        <hr />\n        <div className=\"original-price price-item align-center mg-xsm fw-bold\">\n          <h4>Price ({cartState.cartItems.length} Items)</h4>\n          <p className=\"para-md\">₹{totalOldPrice()}</p>\n        </div>\n        <div className=\"discount-price price-item align-center mg-xsm fw-bold\">\n          <h4>Discount</h4>\n          <p className=\"para-md\">- ₹{totalOldPrice() - totalPrice()}</p>\n        </div>\n        <div className=\"delivery-charges price-item align-center mg-xsm fw-bold\">\n          <h4>Delivery Charge</h4>\n          <p className=\"para-md\">₹{deliveryCharge()}</p>\n        </div>\n        <hr />\n        <div className=\"total-amount price-item flex align-center mg-xsm\">\n          <h4>Total Amount</h4>\n          <p className=\"para-md\">₹{totalPrice() }</p>\n        </div>\n        <hr />\n\n        <p className=\"note fw-bold mg-xsm\">\n          You will save ₹{totalOldPrice() - totalPrice()} on this order\n        </p>\n        <p className=\"note-free-delivery fw-bold mg-xsm\">\n          FREE Home Delivery on all orders within same village. \n        </p>\n        <p className=\"note-free-delivery fw-bold mg-xsm\">\n        ఒకే గ్రామంలోని అన్ని ఆర్డర్‌లపై ఉచిత హోమ్ డెలివరీ.\n        </p>\n\n        {location.pathname == \"/cart\" ? (\n          <Link\n            to=\"/checkout\"\n            className=\"btn btn-solid fw-bold btn-place-order align-center\"\n          >\n            PROCEED TO CHECKOUT\n          </Link>\n        ) : (\n          <a\n            className=\"btn btn-solid fw-bold btn-place-order align-center btn-payment\"\n            onClick={handlePayment}\n          >\n            CONFIRM ORDER\n          </a>\n        )}\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}